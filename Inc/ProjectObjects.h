/* #######################################################################################################
 *											INTRODUCTION
 * ####################################################################################################### */
/* *********************************************************************************************************
 *
 * =======================================================================================================
 * COMMENTS:
 *
 * =======================================================================================================
 * EXAMPLE:
 *
 ********************************************************************************************************** */

#ifndef PROJECT_OBJECTS_H_
#define PROJECT_OBJECTS_H_



/* #######################################################################################################
 *											INCLUDES
 * ####################################################################################################### */

#include <stdbool.h>
#include "a4988_stepstick.h"
#include "EEPROM_24AA01.h"
#include "ST7565.h"
#include "diskio.h"
#include "outerCommunication.h"
#include "SD.h"



/* #######################################################################################################
 *											DEFINES
 * ####################################################################################################### */

#define MOTORS_NUM 4



/* #######################################################################################################
 *											DATA TYPES
 * ####################################################################################################### */

typedef struct MotorData_EEPROM{
	double maxSpeed;

	int stepSize;

	int positionZero;
	int positionEnd;
}MotorData_EEPROM;

typedef struct DeviceSettings_Tag{
	enum {
		RELATIVE,
		ABSOLUTE
	}positioningMode;

	enum {
		IDLE,
		BUSY
	}sdCommandState;

	FATFS* fatfs;

	SDCard_Settings* sd;

	MotorSettings* motors[MOTORS_NUM];

	EEPROMSettings* eeprom;

	ST7565R_Settings* lcd;

	OuterComm_Settings* outComm;

	bool errMove;

	double speed;
	uint8_t recievedBT;
	bool EOL_recieved; /*TODO: check if it is not the same as EOL_resieved in outComm struct*/
	bool transmissionBT;
}DeviceSettings;



/* #######################################################################################################
 *											EXTERNS
 * ####################################################################################################### */



/* #######################################################################################################
 *										PUBLIC DECLARATIONS
 * ####################################################################################################### */

void init_deviceSettings(DeviceSettings* settings);



#endif /*PROJECT_OBJECTS_H_*/
