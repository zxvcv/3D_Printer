/* #######################################################################################################
 *											INTRODUCTION
 * ####################################################################################################### */
/* *********************************************************************************************************
 *
 * =======================================================================================================
 * COMMENTS:
 *
 * =======================================================================================================
 * EXAMPLE:
 *		char cmdName[50]; //must ends with '\0'
 *		GCodeCommand cmd;
 *		parseGCodeCommand(cmdName, &cmd);
 *		executeGCodeCommand(&cmd);
 ********************************************************************************************************** */

#ifndef PARSER_GCODE_H_
#define PARSER_GCODE_H_



/* #######################################################################################################
 *											INCLUDES
 * ####################################################################################################### */

#include <stdbool.h>
#include "a4988_stepstick.h"
#include "manager.h"



/* #######################################################################################################
 *											DEFINES
 * ####################################################################################################### */

#define GCODE_COMMANDS_NUM 10



/* #######################################################################################################
 *											DATA TYPES
 * ####################################################################################################### */

typedef struct GCodeCommand_Tag{
	Std_Err (*execute)(struct GCodeCommand_Tag*, DeviceSettings*) ;	//command pointer
	int cmdNum;

	struct{
		double x;				//X-axis move
		double y;				//Y-axis move
		double z;				//Z-axis move
		double e;				//extruder-axis move
		double f;				//speed of the movement
		double s;				//temperature
	}data;

	struct{
		unsigned short _x : 1;
		unsigned short _y : 1;
		unsigned short _z : 1;
		unsigned short _e : 1;
		unsigned short _f : 1;
		unsigned short _s : 1;
	}usedFields;
}GCodeCommand;



/* #######################################################################################################
 *											EXTERNS
 * ####################################################################################################### */



/* #######################################################################################################
 *										PUBLIC DECLARATIONS
 * ####################################################################################################### */

Std_Err parseGCodeCommand(char* cmd, GCodeCommand* cpOUT);
Std_Err executeGCodeCommand(GCodeCommand* cmd, DeviceSettings* settings);



#endif /*PARSER_GCODE_H_*/
